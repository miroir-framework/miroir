{
  "uuid": "3f025c6c-982d-47ed-8061-50009788773a",
  "parentName":"TransformerTest",
  "parentUuid":"681be9ca-c593-45f5-b45a-5f1d4969e91e",
  "name":"resolveConditionalSchema",
  "selfApplication":"21840247-b5b1-4344-baec-f818f4797d92",
  "branch":"ad1ddc4e-556e-4598-9cff-706a2bde0be7",
  "description": "The Test for the resolveConditionalSchema Transformer",
  "definition": {
    "transformerTestType": "transformerTestSuite",
    "transformerTestLabel": "resolveConditionalSchema",
    "transformerTests": {
      "returns the original schema if no conditionalMMLS tag is present": {
        "transformerTestType": "transformerTest",
        "transformerTestLabel": "returns the original schema if no conditionalMMLS tag is present",
        "transformerName": "resolveConditionalSchema",
        "runTestStep": "build",
        "transformer": {
          "transformerType": "resolveConditionalSchema",
          "interpolation": "build",
          "schema": { "type": "string" },
          "valueObject": "test",
          "context": "defaultValue",
          "valuePath": []
        },
        "transformerParams": {},
        "expectedValue": { "type": "string" }
      },
      "returns the original schema if conditionalMMLS tag is present but no parentUuid": {
        "transformerTestType": "transformerTest",
        "transformerTestLabel": "returns the original schema if conditionalMMLS tag is present but no parentUuid",
        "transformerName": "resolveConditionalSchema",
        "runTestStep": "build",
        "transformer": {
          "transformerType": "resolveConditionalSchema",
          "interpolation": "build",
          "schema": { "type": "string", "tag": { "value": { "conditionalMMLS": {} } } },
          "valueObject": "test",
          "context": "defaultValue",
          "valuePath": []
        },
        "transformerParams": {},
        "expectedValue": { "type": "string", "tag": { "value": { "conditionalMMLS": {} } } }
      },
      "error if reduxDeploymentsState is missing when parentUuid is present": {
        "transformerTestType": "transformerTest",
        "transformerTestLabel": "error if reduxDeploymentsState is missing when parentUuid is present",
        "transformerName": "resolveConditionalSchema",
        "runTestStep": "build",
        "transformer": {
          "transformerType": "resolveConditionalSchema",
          "interpolation": "build",
          "schema": {
            "type": "object",
            "definition": {
              "a": {
                "type": "object",
                "definition": { "b": { "type": "string" } }
              },
              "c": {
                "type": "object",
                "definition": {
                  "d": {
                    "type": "any",
                    "tag": {
                      "value": {
                        "conditionalMMLS": {
                          "parentUuid": { "path": "#.notExistingAttribute" }
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "valueObject": {},
          "context": "defaultValue",
          "valuePath": ["c", "d"]
        },
        "transformerParams": {},
        "expectedValue": { "error": "NO_REDUX_DEPLOYMENTS_STATE" }
      },
      "error if no value found at given parentUuid path": {
        "transformerTestType": "transformerTest",
        "transformerTestLabel": "error if no value found at given parentUuid path",
        "transformerName": "resolveConditionalSchema",
        "runTestStep": "build",
        "transformer": {
          "transformerType": "resolveConditionalSchema",
          "interpolation": "build",
          "schema": {
            "type": "object",
            "definition": {
              "a": {
                "type": "object",
                "definition": { "b": { "type": "string" } }
              },
              "c": {
                "type": "object",
                "definition": {
                  "d": {
                    "type": "any",
                    "tag": {
                      "value": {
                        "conditionalMMLS": {
                          "parentUuid": { "path": "#.notExistingAttribute" }
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "valueObject": {},
          "context": "defaultValue",
          "valuePath": ["c", "d"]
        },
        "transformerParams": {},
        "expectedValue": {
          "error": "INVALID_PARENT_UUID_CONFIG",
          "details": "parentUuid resolution failed: {\n  \"error\": \"PATH_SEGMENT_NOT_FOUND\",\n  \"segment\": \"notExistingAttribute\",\n  \"acc\": {}\n}"
        }
      },
      "resolves schema using legacy single path configuration": {
        "transformerTestType": "transformerTest",
        "transformerTestLabel": "resolves schema using legacy single path configuration",
        "transformerName": "resolveConditionalSchema",
        "runTestStep": "build",
        "transformer": {
          "transformerType": "resolveConditionalSchema",
          "interpolation": "build",
          "schema": {
            "type": "object",
            "definition": {
              "a": {
                "type": "object",
                "definition": { "b": { "type": "string" } }
              },
              "c": {
                "type": "object",
                "definition": {
                  "d": {
                    "type": "any",
                    "tag": {
                      "value": { "conditionalMMLS": { "parentUuid": { "path": "#.e" } } }
                    }
                  },
                  "e": { "type": "string" }
                }
              }
            }
          },
          "valueObject": {},
          "context": "defaultValue",
          "valuePath": ["c", "d"]
        },
        "transformerParams": {},
        "expectedValue": {
          "type": "object",
          "definition": {
            "uuid": {
              "type": "simpleType",
              "definition": "string",
              "validations": [{ "type": "uuid" }],
              "tag": { "id": 1, "defaultLabel": "Uuid", "editable": false }
            },
            "parentName": {
              "type": "simpleType",
              "definition": "string",
              "optional": true,
              "tag": { "id": 2, "defaultLabel": "Entity Name", "editable": false }
            },
            "parentUuid": {
              "type": "simpleType",
              "definition": "string",
              "validations": [{ "type": "uuid" }],
              "tag": { "id": 3, "defaultLabel": "Entity Uuid", "editable": false }
            },
            "name": {
              "type": "simpleType",
              "definition": "string",
              "tag": { "id": 4, "defaultLabel": "Name", "editable": true }
            },
            "author": {
              "type": "simpleType",
              "definition": "string",
              "validations": [
                {
                  "type": "uuid"
                }
              ],
              "optional": true,
              "tag": {
                "id": 5,
                "defaultLabel": "Author",
                "targetEntity": "d7a144ff-d1b9-4135-800c-a7cfc1f38733",
                "editable": true
              }
            },
            "publisher": {
              "type": "simpleType",
              "definition": "string",
              "validations": [
                {
                  "type": "uuid"
                }
              ],
              "optional": true,
              "tag": {
                "id": 5,
                "defaultLabel": "Publisher",
                "targetEntity": "a027c379-8468-43a5-ba4d-bf618be25cab",
                "editable": true
              }
            }
          }
        }
      }
    }
  }
}
