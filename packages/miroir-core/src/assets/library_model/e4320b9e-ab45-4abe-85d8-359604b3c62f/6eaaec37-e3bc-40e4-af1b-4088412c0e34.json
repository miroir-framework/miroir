{
  "uuid": "6eaaec37-e3bc-40e4-af1b-4088412c0e34",
  "parentName": "Query",
  "parentUuid": "e4320b9e-ab45-4abe-85d8-359604b3c62f",
  "name": "AuthorsCountByCountry",
  "defaultLabel": "The count of Authors By Country.",
  "description": "This query produces a list of countries, with the count of Authors for each country.",
  "definition": {
    "extractorTemplates": {
      "countries": {
        "extractorTemplateType": "extractorTemplateForObjectListByEntity",
        "applicationSection": "data",
        "parentName": "Country",
        "parentUuid": {
          "transformerType": "returnValue",
          "value": "d3139a6d-0486-4ec8-bded-2a83a3c3cee4"
        }
      }
    },
    "combinerTemplates": {
      "AuthorWithCountry": {
        "extractorTemplateType": "combinerByManyToManyRelationReturningObjectList",
        "applicationSection": "data",
        "parentName": "Author",
        "parentUuid": {
          "transformerType": "returnValue",
          "value": "d7a144ff-d1b9-4135-800c-a7cfc1f38733"
        },
        "objectListReference": {
          "transformerType": "getFromContext",
          "interpolation": "runtime",
          "referenceName": "countries"
        },
        "AttributeOfRootListObjectToCompareToListReferenceUuid": "country",
        "applyTransformer": {
          "transformerType": "freeObjectTemplate",
          "interpolation": "runtime",
          "definition": {
            "countryName": {
              "transformerType": "getFromContext",
              "interpolation": "runtime",
              "referencePath": [
                "referenceObject",
                "name"
              ]
            },
            "countryUuid": {
              "transformerType": "getFromContext",
              "interpolation": "runtime",
              "referencePath": [
                "referenceObject",
                "uuid"
              ]
            },
            "authorName": {
              "transformerType": "getFromContext",
              "interpolation": "runtime",
              "referencePath": [
                "foreignKeyObject",
                "name"
              ]
            }
          }
        }
      }
    },
    "runtimeTransformers": {
      "00_AuthorCountByCountry": {
        "transformerType": "aggregate",
        "applyTo": {
          "transformerType": "getFromContext",
          "interpolation": "runtime",
          "referenceName": "AuthorWithCountry"
        },
        "groupBy": [
          "countryName",
          "countryUuid"
        ]
      }
    }
  }
}